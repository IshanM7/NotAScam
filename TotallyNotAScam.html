<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Be My Valentine? üíù</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet"/>
<style>
  /* ‚îÄ‚îÄ‚îÄ Reset & Variables ‚îÄ‚îÄ‚îÄ */
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --rose:      #c2185b;
    --rose-light:#e91e63;
    --blush:     #fce4ec;
    --cream:     #fff5f7;
    --gold:      #d4a853;
    --gold-light:#f0d080;
    --text-dark: #4a1942;
    --text-mid:  #7a3a6e;
  }

  /* ‚îÄ‚îÄ‚îÄ Body & Background ‚îÄ‚îÄ‚îÄ */
  body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: var(--cream);
    font-family: 'Cormorant Garamond', Georgia, serif;
    color: var(--text-dark);
    overflow: hidden;
    position: relative;
  }

  /* Soft radial glow behind content */
  body::before {
    content: '';
    position: fixed; inset: 0;
    background:
      radial-gradient(ellipse 70% 60% at 50% 45%, rgba(206,147,216,0.18) 0%, transparent 70%),
      radial-gradient(ellipse 40% 40% at 20% 80%, rgba(244,143,177,0.12) 0%, transparent 60%),
      radial-gradient(ellipse 35% 35% at 80% 15%, rgba(212,168,83,0.10) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  /* ‚îÄ‚îÄ‚îÄ Floating Petals (background decoration) ‚îÄ‚îÄ‚îÄ */
  .petal {
    position: fixed;
    width: 12px; height: 18px;
    background: radial-gradient(ellipse at 30% 30%, #f48fb1, #ce93d8);
    border-radius: 50% 50% 50% 0;
    opacity: 0;
    pointer-events: none;
    z-index: 1;
    animation: petalFall linear infinite;
  }
  .petal:nth-child(1)  { left: 8%;  animation-duration: 9s;  animation-delay: 0s;   width:10px; height:15px; }
  .petal:nth-child(2)  { left: 18%; animation-duration: 11s; animation-delay: 2s;   width:14px; height:20px; background: radial-gradient(ellipse at 30% 30%, #f8bbd0, #ba68c8); }
  .petal:nth-child(3)  { left: 30%; animation-duration: 8s;  animation-delay: 4s;   width:9px;  height:13px; }
  .petal:nth-child(4)  { left: 55%; animation-duration: 12s; animation-delay: 1s;   width:13px; height:19px; background: radial-gradient(ellipse at 30% 30%, #f06292, #ab47bc); }
  .petal:nth-child(5)  { left: 70%; animation-duration: 10s; animation-delay: 3s;   width:11px; height:16px; }
  .petal:nth-child(6)  { left: 85%; animation-duration: 9s;  animation-delay: 5s;   width:10px; height:14px; background: radial-gradient(ellipse at 30% 30%, #f48fb1, #ce93d8); }
  .petal:nth-child(7)  { left: 42%; animation-duration: 13s; animation-delay: 6s;   width:8px;  height:12px; }
  .petal:nth-child(8)  { left: 92%; animation-duration: 10s; animation-delay: 7s;   width:12px; height:17px; background: radial-gradient(ellipse at 30% 30%, #f8bbd0, #ce93d8); }

  @keyframes petalFall {
    0%   { top: -30px; opacity: 0; transform: rotate(0deg) translateX(0); }
    10%  { opacity: 0.7; }
    90%  { opacity: 0.5; }
    100% { top: 110vh; opacity: 0; transform: rotate(360deg) translateX(40px); }
  }

  /* ‚îÄ‚îÄ‚îÄ Main Card ‚îÄ‚îÄ‚îÄ */
  .card {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 28px;
    padding: 48px 40px 52px;
    background: rgba(255,255,255,0.72);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(206,147,216,0.25);
    border-radius: 28px;
    box-shadow:
      0  8px 40px rgba(194,24,91,0.08),
      0  2px  8px rgba(0,0,0,0.04),
      inset 0 1px 0 rgba(255,255,255,0.6);
    max-width: 440px;
    width: 90vw;
    animation: cardIn 1s cubic-bezier(.22,1,.36,1) both;
  }

  @keyframes cardIn {
    from { opacity: 0; transform: translateY(30px) scale(.96); }
    to   { opacity: 1; transform: translateY(0)    scale(1);   }
  }

  /* ‚îÄ‚îÄ‚îÄ Decorative Gold Border Corners ‚îÄ‚îÄ‚îÄ */
  .card::before, .card::after {
    content: '‚ú¶';
    position: absolute;
    color: var(--gold);
    font-size: 18px;
    opacity: 0.6;
  }
  .card::before { top: 14px; left: 20px; }
  .card::after  { bottom: 14px; right: 20px; }

  /* ‚îÄ‚îÄ‚îÄ Upload Area / Photo Display ‚îÄ‚îÄ‚îÄ */
  .photo-wrap {
    height: 180px;
    border-radius: 20%;
    border: 3px solid var(--gold);
    box-shadow:
      0 0 0 6px rgba(212,168,83,0.12),
      0 6px 24px rgba(194,24,91,0.14);
    overflow: hidden;
    position: relative;
    cursor: pointer;
    background: var(--blush);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: box-shadow .3s;
  }
  /* ‚îÄ‚îÄ‚îÄ Photos Row (for side-by-side layout) ‚îÄ‚îÄ‚îÄ */
  .photos-row {
    display: flex;
    gap: 16px;
    justify-content: center;
    align-items: center;
  }
  .photo-wrap:hover {
    box-shadow:
      0 0 0 6px rgba(212,168,83,0.22),
      0 8px 32px rgba(194,24,91,0.2);
  }
  .photo-wrap img {
    width: 100%; height: 100%;
    object-fit: cover;
    /* display: none; */
  }
  .photo-wrap .upload-hint {
    text-align: center;
    color: var(--text-mid);
    font-size: 15px;
    line-height: 1.4;
    padding: 0 12px;
    pointer-events: none;
  }
  .photo-wrap .upload-hint .icon { font-size: 28px; display: block; margin-bottom: 6px; }
  input#photoInput { position: absolute; inset: 0; opacity: 0; cursor: pointer; }

  /* ‚îÄ‚îÄ‚îÄ Headline ‚îÄ‚îÄ‚îÄ */
  .headline {
    text-align: center;
    line-height: 1.25;
  }
  .headline .top-line {
    font-size: 15px;
    font-weight: 300;
    font-style: italic;
    color: var(--text-mid);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .headline h1 {
    font-size: 2.2rem;
    font-weight: 300;
    color: var(--text-dark);
    letter-spacing: -0.5px;
  }
  .headline h1 em {
    font-style: italic;
    color: var(--rose);
  }

  /* ‚îÄ‚îÄ‚îÄ Divider ‚îÄ‚îÄ‚îÄ */
  .divider {
    width: 60px; height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }

  /* ‚îÄ‚îÄ‚îÄ Sub-text ‚îÄ‚îÄ‚îÄ */
  .subtext {
    font-size: 16px;
    font-weight: 300;
    color: var(--text-mid);
    text-align: center;
    line-height: 1.6;
    max-width: 300px;
  }

  /* ‚îÄ‚îÄ‚îÄ Buttons Row ‚îÄ‚îÄ‚îÄ */
  .buttons {
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
    min-height: 60px;
    position: relative;
  }

  /* ‚îÄ‚îÄ‚îÄ Yes Button ‚îÄ‚îÄ‚îÄ */
  .btn-yes {
    position: relative;
    z-index: 10;
    padding: 14px 40px;
    font-family: 'Dancing Script', cursive;
    font-size: 1.5rem;
    font-weight: 600;
    color: #fff;
    background: linear-gradient(135deg, var(--rose-light), var(--rose));
    border: none;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 4px 18px rgba(233,30,99,0.35);
    transition: transform .25s cubic-bezier(.22,1,.36,1), box-shadow .25s, font-size .35s cubic-bezier(.22,1,.36,1), padding .35s cubic-bezier(.22,1,.36,1);
    outline: none;
    white-space: nowrap;
  }
  .btn-yes:hover {
    transform: translateY(-2px) scale(1.04);
    box-shadow: 0 6px 28px rgba(233,30,99,0.45);
  }
  .btn-yes:active { transform: translateY(0) scale(.97); }

  /* ‚îÄ‚îÄ‚îÄ No Button ‚îÄ‚îÄ‚îÄ */
  .btn-no {
    position: static; /* starts in normal flow next to Yes; JS switches to fixed on first move */
    z-index: 5;
    padding: 12px 32px;
    font-family: 'Dancing Script', cursive;
    font-size: 1.3rem;
    font-weight: 400;
    color: var(--text-mid);
    background: rgba(255,255,255,0.7);
    border: 1px solid rgba(206,147,216,0.4);
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    transition: box-shadow .2s, opacity .3s;
    outline: none;
    white-space: nowrap;
    user-select: none;
  }
  .btn-no:hover {
    box-shadow: 0 4px 14px rgba(0,0,0,0.1);
  }
  .btn-no.hidden { opacity: 0; pointer-events: none; }

  /* ‚îÄ‚îÄ‚îÄ Back Button ‚îÄ‚îÄ‚îÄ */
  .btn-back {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 101;
    padding: 12px 32px;
    font-family: 'Dancing Script', cursive;
    font-size: 1.3rem;
    font-weight: 400;
    color: var(--text-mid);
    background: rgba(255,255,255,0.7);
    border: 1px solid rgba(206,147,216,0.4);
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    transition: box-shadow .2s, opacity .3s;
    outline: none;
    white-space: nowrap;
    user-select: none;
  }
  .btn-back:hover {
    box-shadow: 0 4px 14px rgba(0,0,0,0.1);
  }

  /* ‚îÄ‚îÄ‚îÄ Celebration Overlay ‚îÄ‚îÄ‚îÄ */
  .celebration {
    display: none;
    position: fixed; inset: 0;
    z-index: 100;
    background: rgba(255,245,247,0.92);
    backdrop-filter: blur(6px);
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 20px;
    animation: fadeInCelebration .5s ease both;
  }
  .celebration.active { display: flex; }

  @keyframes fadeInCelebration {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  .celebration h2 {
    font-family: 'Dancing Script', cursive;
    font-size: 3rem;
    color: var(--rose);
    text-shadow: 0 2px 12px rgba(206,147,216,0.4);
    animation: celebrationPulse 1.5s ease infinite alternate;
  }
  @keyframes celebrationPulse {
    from { transform: scale(1); }
    to   { transform: scale(1.05); }
  }

  .celebration p {
    font-size: 1.2rem;
    color: var(--text-mid);
    font-style: italic;
    font-weight: 300;
  }

  /* ‚îÄ‚îÄ‚îÄ Celebration Photo ‚îÄ‚îÄ‚îÄ */
  .celebration-photo-wrap {
    width: 200px; height: 200px;
    border-radius: 50%;
    border: 4px solid var(--gold);
    box-shadow:
      0 0 0 8px rgba(212,168,83,0.15),
      0 8px 36px rgba(194,24,91,0.2);
    overflow: hidden;
    background: var(--blush);
    display: none;
  }
  .celebration-photo-wrap.visible { display: block; }
  .celebration-photo-wrap img {
    width: 100%; height: 100%;
    object-fit: cover;
    animation: celebPhotoIn .6s cubic-bezier(.22,1,.36,1) both;
  }
  @keyframes celebPhotoIn {
    from { transform: scale(.85); opacity: 0; }
    to   { transform: scale(1);   opacity: 1; }
  }

  /* ‚îÄ‚îÄ‚îÄ Canvas (fireworks + hearts) ‚îÄ‚îÄ‚îÄ */
  #celebrationCanvas {
    position: fixed; inset: 0;
    z-index: 99;
    pointer-events: none;
  }

  /* ‚îÄ‚îÄ‚îÄ Tiny floating hearts on the card (ambient) ‚îÄ‚îÄ‚îÄ */
  .mini-heart {
    position: absolute;
    font-size: 14px;
    opacity: 0;
    pointer-events: none;
    animation: miniHeartFloat 4s ease-in-out infinite;
    z-index: 1;
  }
  @keyframes miniHeartFloat {
    0%   { opacity: 0;   transform: translateY(0) scale(.8); }
    20%  { opacity: .5; }
    80%  { opacity: .3; }
    100% { opacity: 0;   transform: translateY(-50px) scale(1.1); }
  }
</style>
</head>
<body>

<!-- Floating Petals -->
<div class="petal"></div>
<div class="petal"></div>
<div class="petal"></div>
<div class="petal"></div>
<div class="petal"></div>
<div class="petal"></div>
<div class="petal"></div>
<div class="petal"></div>

<!-- Main Card -->
<div class="card" id="card">
  <!-- Photo -->
  <div class="photos-row">
    <div class="photo-wrap" id="photoWrap1">
      <img id="photoImg1" src="" alt="Photo" />
    </div>
    <div class="photo-wrap" id="photoWrap2">
      <img id="photoImg2" src="" alt="Photo" />
    </div>
  </div>

  <!-- Text -->
  <div class="headline">
    <div class="top-line">Hi smush I have a very important question for you</div>
    <h1>Will you be<br/><em>my Valentine?</em></h1>
  </div>
  <div class="divider"></div>
  <p class="subtext">Every moment with you is a gift.<br/>Say yes please, if you click no I will be very sad</p>

  <!-- Buttons -->
  <div class="buttons" id="buttonsArea">
    <button class="btn-yes" id="btnYes">Yes ‚ô°</button>
    <button class="btn-no"  id="btnNo">No</button>
  </div>
</div>

<!-- Celebration Overlay -->
<div class="celebration" id="celebration">
  <div class="celebration-photo-wrap" id="celebrationPhoto">
    <img id="celebrationPhotoImg" src="" alt="Together" />
  </div>
  <div class="photos-row">
    <div class="photo-wrap" id="photoWrap4">
      <img id="photoImg4" src="" alt="Photo" />
    </div>
    <div class="photo-wrap" id="photoWrap5">
      <img id="photoImg5" src="" alt="Photo" />
    </div>
  </div>
  <h2>YAYYYYYYYY I LOVE YOU!!!üíï</h2>
  <button class="btn-back" id="btnBack">Back</button>
  <div class="photos-row">
    <div class="photo-wrap" id="photoWrap6">
      <img id="photoImg6" src="" alt="Photo" />
    </div>
    <div class="photo-wrap" id="photoWrap3">
      <img id="photoImg3" src="" alt="Photo" />
    </div>
  </div>
</div>

<!-- Fireworks Canvas -->
<canvas id="celebrationCanvas"></canvas>

<script>
(function(){


  // ‚îÄ‚îÄ‚îÄ Set Static Images (embedded in code) ‚îÄ‚îÄ‚îÄ
  const photoImg1 = document.getElementById('photoImg1');
  const photoImg2 = document.getElementById('photoImg2');
  const photoImg3 = document.getElementById('photoImg3');
  const photoImg4 = document.getElementById('photoImg4');
  const photoImg5 = document.getElementById('photoImg5');
  const photoImg6 = document.getElementById('photoImg6');

  let uploadedSrc = ''; // Will be set to the first image for celebration

  // Set the first photo (replace with your base64 data URL)
  
  photoImg1.src = "images/lp_image.jpeg"
  photoImg2.src = "images/IMG_9067.png"
  photoImg3.src = "images/IMG_9266.jpg"
  photoImg4.src = "images/IMG_8639.jpg"
  photoImg5.src = "images/IMG_3057.jpg"
  photoImg6.src = "images/IMG_9265.jpg"

  // const photoImg1 = document.getElementById('photoImg1');
  // const photoImg2 = document.getElementById('photoImg2');
  // let uploadedSrc = ''; // Will be set to the first image for celebration

  // // Set the first photo (replace with your base64 data URL)
  // photoImg1.src = "data:image/png;base64,iVBORw0KGgoAAAA"


  // // ‚îÄ‚îÄ‚îÄ Photo Upload ‚îÄ‚îÄ‚îÄ
  // const photoInput = document.getElementById('photoInput');
  // const photoImg   = document.getElementById('photoImg');
  // const uploadHint = document.getElementById('uploadHint');
  // let   uploadedSrc = '';

  // photoInput.addEventListener('change', function(e){
  //   const file = e.target.files[0];
  //   if(!file) return;
  //   const reader = new FileReader();
  //   reader.onload = function(ev){
  //     uploadedSrc = ev.target.result;
  //     photoImg.src = uploadedSrc;
  //     photoImg.style.display = 'block';
  //     uploadHint.style.display = 'none';
  //   };
  //   reader.readAsDataURL(file);
  // });

  // ‚îÄ‚îÄ‚îÄ No Button Logic ‚îÄ‚îÄ‚îÄ
  const btnNo   = document.getElementById('btnNo');
  const btnYes  = document.getElementById('btnYes');
  let   noClicks = 0;
  let   isFixed  = false;

  // ‚îÄ‚îÄ‚îÄ Switch from static ‚Üí fixed, preserving visual position ‚îÄ‚îÄ‚îÄ
  function becomeFixed(){
    if(isFixed) return;
    const r = btnNo.getBoundingClientRect();
    btnNo.style.position = 'fixed';
    btnNo.style.left = r.left + 'px';
    btnNo.style.top  = r.top  + 'px';
    btnNo.style.margin = '0';
    isFixed = true;
  }

  // ‚îÄ‚îÄ‚îÄ Check if a rect overlaps the Yes button (with padding) ‚îÄ‚îÄ‚îÄ
  function overlapsYes(x, y, w, h){
    const yr = btnYes.getBoundingClientRect();
    const pad = 24;
    return !(
      x + w < yr.left - pad ||
      x     > yr.right + pad ||
      y + h < yr.top - pad ||
      y     > yr.bottom + pad
    );
  }

  // ‚îÄ‚îÄ‚îÄ Pick a random position anywhere in the viewport (not overlapping Yes) ‚îÄ‚îÄ‚îÄ
  // function jumpToRandom(){
  //   const btnW = btnNo.offsetWidth;
  //   const btnH = btnNo.offsetHeight;
  //   const pad  = 12;
  //   let x, y, attempts = 0;

  //   console.log(window.innerHeight);
  //   console.log(window.innerWidth);
  //   do {
  //     x = pad + Math.random() * (window.innerWidth - btnW - pad);
  //     y = pad + Math.random() * (window.innerHeight - btnH - pad);
  //     attempts++;
  //   } while(overlapsYes(x, y, btnW, btnH) && attempts < 50);

  //   btnNo.style.left = x + 'px';
  //   btnNo.style.top  = y + 'px';
  // }
  function jumpToRandom(){
    const btnW = btnNo.offsetWidth;
    const btnH = btnNo.offsetHeight;
    const yr = btnYes.getBoundingClientRect();
    let x, y, attempts = 0;

    console.log(window.innerHeight);
    console.log(window.innerWidth);
    do {
      const angle = Math.random() * 2 * Math.PI;
      const distance = Math.random() * 200;
      const centerX = yr.left + yr.width / 2;
      const centerY = yr.top + yr.height / 2;
      x = centerX + distance * Math.cos(angle) - btnW / 2;
      y = centerY + distance * Math.sin(angle) - btnH / 2;
      // Clamp to screen
      x = Math.max(0, Math.min(x, window.innerWidth - btnW));
      y = Math.max(0, Math.min(y, window.innerHeight - btnH));

      y= y/1.3;
      Math.random() < 0.5 ? x = -(x/2) : x = (x/2);
      attempts++;
    } while(overlapsYes(x, y, btnW, btnH) && attempts < 50);

    btnNo.style.left = x + 'px';
    btnNo.style.top  = y + 'px';
  }

  // ‚îÄ‚îÄ‚îÄ Click handler ‚îÄ‚îÄ‚îÄ
  btnNo.addEventListener('click', function(e){
    e.stopPropagation();
    noClicks++;

    // Grow Yes button a little each time
    btnYes.style.fontSize = (1.5 + noClicks * 0.18) + 'rem';
    btnYes.style.padding  = (14 + noClicks * 4) + 'px ' + (40 + noClicks * 10) + 'px';

    becomeFixed();
    jumpToRandom();
  });

  // ‚îÄ‚îÄ‚îÄ Yes Button ‚Äì Celebration ‚îÄ‚îÄ‚îÄ
  btnYes.addEventListener('click', function(){
    btnNo.classList.add('hidden');

    if(uploadedSrc){
      const celebWrap = document.getElementById('celebrationPhoto');
      const celebImg  = document.getElementById('celebrationPhotoImg');
      celebImg.src = uploadedSrc;
      celebWrap.classList.add('visible');
    }

    document.getElementById('celebration').classList.add('active');
    startCelebration();
    btnBack.style.display = 'block';
  });

  // ‚îÄ‚îÄ‚îÄ Back Button ‚Äì Return to First Screen ‚îÄ‚îÄ‚îÄ
  const btnBack = document.getElementById('btnBack');
  btnBack.style.display = 'none';
  btnBack.addEventListener('click', function(){
    document.getElementById('celebration').classList.remove('active');
    btnNo.classList.remove('hidden');
    btnBack.style.display = 'none';
  });

  // ‚îÄ‚îÄ‚îÄ Fireworks & Hearts Canvas ‚îÄ‚îÄ‚îÄ
  const canvas  = document.getElementById('celebrationCanvas');
  const ctx     = canvas.getContext('2d');
  let particles = [];

  function resizeCanvas(){
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  class Particle {
    constructor(x, y, type){
      this.x = x; this.y = y;
      this.type = type;
      if(type === 'spark'){
        const angle = Math.random() * Math.PI * 2;
        const speed = 1.5 + Math.random() * 3.5;
        this.vx = Math.cos(angle) * speed;
        this.vy = Math.sin(angle) * speed;
        this.life = 1;
        this.decay = 0.012 + Math.random() * 0.015;
        this.size = 2.5 + Math.random() * 3;
        const palette = ['#f48fb1','#f06292','#e91e63','#d4a853','#f0d080','#fff','#ce93d8','#ba68c8'];
        this.color = palette[Math.floor(Math.random() * palette.length)];
      } else {
        this.vx = (Math.random() - 0.5) * 2;
        this.vy = -(1 + Math.random() * 2);
        this.life = 1;
        this.decay = 0.008 + Math.random() * 0.008;
        this.size = 10 + Math.random() * 18;
        this.rot = Math.random() * Math.PI * 2;
        this.rotSpeed = (Math.random() - 0.5) * 0.06;
      }
    }
    update(){
      this.x += this.vx;
      this.y += this.vy;
      this.life -= this.decay;
      if(this.type === 'spark'){
        this.vy += 0.04;
        this.vx *= 0.995;
      } else {
        this.vy += 0.015;
        this.vx *= 0.99;
        this.rot += this.rotSpeed;
      }
    }
    draw(){
      ctx.save();
      ctx.globalAlpha = Math.max(0, this.life);
      if(this.type === 'spark'){
        ctx.fillStyle = this.color;
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 6;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size * this.life, 0, Math.PI*2);
        ctx.fill();
      } else {
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rot);
        ctx.fillStyle = '#e91e63';
        ctx.shadowColor = 'rgba(233,30,99,0.5)';
        ctx.shadowBlur = 8;
        const s = this.size * this.life;
        ctx.beginPath();
        ctx.moveTo(0, s * 0.3);
        ctx.bezierCurveTo(-s*0.6, -s*0.3, -s*1.1, s*0.2, 0, s*0.9);
        ctx.bezierCurveTo(s*1.1, s*0.2, s*0.6, -s*0.3, 0, s*0.3);
        ctx.fill();
      }
      ctx.restore();
    }
  }

  function burst(x, y){
    const count = 50 + Math.floor(Math.random() * 40);
    for(let i = 0; i < count; i++) particles.push(new Particle(x, y, 'spark'));
  }

  function emitHeart(){
    particles.push(new Particle(Math.random() * canvas.width, canvas.height + 10, 'heart'));
  }

  let celebrationActive = false;
  let lastBurst = 0;
  let lastHeart = 0;

  function animate(time){
    if(!celebrationActive) return;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if(time - lastBurst > 600){
      burst(canvas.width * (0.15 + Math.random() * 0.7), canvas.height * (0.1 + Math.random() * 0.5));
      lastBurst = time;
    }
    if(time - lastHeart > 300){
      emitHeart();
      lastHeart = time;
    }
    particles = particles.filter(p => p.life > 0);
    for(const p of particles){ p.update(); p.draw(); }
    requestAnimationFrame(animate);
  }

  function startCelebration(){
    celebrationActive = true;
    burst(canvas.width/2, canvas.height * 0.35);
    burst(canvas.width * 0.3, canvas.height * 0.4);
    burst(canvas.width * 0.7, canvas.height * 0.3);
    requestAnimationFrame(animate);
  }

  // ‚îÄ‚îÄ‚îÄ Ambient mini hearts on the card ‚îÄ‚îÄ‚îÄ
  (function spawnMiniHearts(){
    const card = document.getElementById('card');
    for(let i = 0; i < 5; i++){
      const h = document.createElement('div');
      h.className = 'mini-heart';
      h.textContent = '‚ô°';
      h.style.left  = (10 + Math.random() * 80) + '%';
      h.style.bottom = (5 + Math.random() * 30) + '%';
      h.style.animationDelay = (Math.random() * 3) + 's';
      h.style.animationDuration = (3 + Math.random() * 3) + 's';
      h.style.fontSize = (10 + Math.random() * 10) + 'px';
      h.style.color = ['#f48fb1','#e91e63','#ce93d8','var(--gold)'][Math.floor(Math.random()*4)];
      card.appendChild(h);
    }
  })();

})();
</script>
</body>
</html>
